<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by Free CSS Templates
http://www.freecsstemplates.org
Released for free under a Creative Commons Attribution 2.5 License

Name       : Brown Stone  
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20100928

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>barrel.rs - moonscript</title>
<link href="/theme/css/style.css" rel="stylesheet" type="text/css" media="screen" />
<link href="/" type="application/atom+xml" rel="alternate" title="barrel.rs ATOM Feed" />
<link href="/rss.xml" type="application/rss+xml" rel="alternate" title="barrel.rs RSS Feed" />
</head>
<body>
<div id="wrapper">
	<div id="page">
		<div id="page-bgtop">
			<div id="page-bgbtm">
 
        
				<div id="content">
					<div class="post">
						<h2 class="title"><a href="/blog/dabbling-with-moonscript">Dabbling with Moonscript</a></h2>
						<p class="meta"><span class="date">Le  </span><span class="posted">Par <a href="#">Sql People</a></span><span>&nbsp; | Catégorie : <a href="/blog">Blog</a></span></p>
					<p class="meta">Tags : <span><a href="/devdiary">/dev/diary</a> / </span>
<span><a href="/moonscript">moonscript</a> / </span>
<span><a href="/programming">programming</a> / </span>
</p>
						<div style="clear: both;">&nbsp;</div>
						<div class="entry">
						 <p><img alt="Lua means moon in portuguese" src="/images/lua_moon_banner.png"></p>
<p>Recently I've started learning/ using Moonscript. It's a language that compiles to <a href="https://www.lua.org/">lua</a> and as such can run in the LuaJIT, an alternative lua engine which allows very easy and <em>fast</em> ffi calls into native code. This makes lua code capable of writing very performant applications and games that use native rendering, window creation or general libraries.</p>
<p>But in my opinion lua has always felt a bit cumbersome. I use awesomewm so I had to write it occasionally to customise my UI layout. And this is where Moonscript comes in. It's a lot of syntactic sugar on top of lua as well as some other concepts such as object orientation which lua just plain out doesn't have. And while yes, you can write good code without OO (<em>cough</em>  <strong>C</strong> <em>cough</em>) it is a nice tool to have in your pocket, especially when writing GUI applications or games.</p>
<h2>The language</h2>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Thing</span>
  <span class="nv">name:</span> <span class="s2">&quot;</span><span class="s">unknown</span><span class="s2">&quot;</span>

<span class="k">class</span> <span class="nc">Person</span> <span class="k">extends</span> <span class="nc">Thing</span>
  <span class="nv">say_name:</span> <span class="nf">=&gt;</span> <span class="nb">print</span> <span class="s2">&quot;</span><span class="s">Hello, I am #{@name}!</span><span class="s2">&quot;</span>

<span class="k">with</span> <span class="nc">Person</span><span class="o">!</span>
  <span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">MoonScript</span><span class="s2">&quot;</span>
  <span class="o">\</span><span class="n">say_name</span><span class="o">!</span>
</pre></div>


<p>As you can see Moonscript is an indentation based language which (in my opinion) combines syntactic elements from lua and ruby together. In the snippet above (which is from the <a href="http://moonscript.org/">moonscript website</a>) you can see classes, inheritance as well as the <code>with</code> keyword which allows you to initialise/ work with objects without typing it's variable name over and over again.</p>
<p>If you want to learn more about the language, I can only recommend you have a look at the <a href="https://github.com/leafo/moonscript/wiki/Learn-MoonScript-in-15-Minutes">Moonscript in 15 minutes guide</a></p>
<h2>How to use it</h2>
<p>You can just write Moonscript files, add <code>#!/usr/bin/env moon</code> to them and get going. Obviously that's pretty cool for little scripts that you just want to get going. But not so great for larger applications because a) you don't have access to <code>ffi</code> via luaJIT and b) it adds additional startup cost.</p>
<p>So instead for my projects so far (which so far are a <a href="https://github.com/spacekookie/dinodino">game</a> and a desktop app) I use a <code>Makefile</code> to build and run the Moonscript compiler and then execute the <code>init.lua</code> with luajit.</p>
<div class="highlight"><pre><span></span><span class="nv">SOURCES</span> <span class="o">:=</span> <span class="k">$(</span>wildcard *.moon<span class="k">)</span> <span class="k">$(</span>wildcard **/*.moon<span class="k">)</span>
<span class="nv">LUAOUT</span> <span class="o">:=</span> <span class="k">$(</span>SOURCES:.moon<span class="o">=</span>.lua<span class="k">)</span><span class="m">0</span>

<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">run</span> <span class="n">build</span>

<span class="nf">all</span><span class="o">:</span> <span class="n">run</span>
<span class="nf">build</span><span class="o">:</span> <span class="k">$(</span><span class="nv">LUAOUT</span><span class="k">)</span>
<span class="nf">%.lua</span><span class="o">:</span> %.<span class="n">moon</span>
        moonc $&lt;
<span class="nf">run</span><span class="o">:</span> <span class="n">build</span>
        luajit init.lua
</pre></div>


<h2>Wrapping up</h2>
<p>So...I'm kinda excited about this. Most of the code I write is either in C or Java (depending on what exactly I'm doing). And those two strongly typed and compiled languages have served me well and will continue to be my go-to solutions for a lot of problems.</p>
<p>But I've long been looking for a dynamicly typed, interpreted/ just-in-time compiled language that I can use for anything from little scripts to medium-sized desktop applications. I used to use python for this but have recently (over the last 6-9 months) fallen out of love and developed a rather passionate dislike of it and it's ecosystem.</p>
<p>My current project will get it's own little article at some point but I don't mind teasing the progress here. I'm writing a new UI for redshift which works with X11 linux backends and is heavily inspired by f.lux on MacOS. It's written in moonscript, with my own forked version of redshift (which I call <a href="https://github.com/spacekookie/libredshift">libredshift</a>). It's on <a href="https://github.com/spacekookie/redshift_ctrl">github</a> and licensed under MIT.</p>
<p>Hope I've made you a little curious about Moonscript :)</p>	
						</div>
					</div>
					<div style="clear: both;">&nbsp;</div>
				</div>
				<div id="sidebar">
					<div id="logo">
						<h1><a href="">barrel.rs</a></h1>
					</div>
					<div id="menu">
						<ul>
							<li ><a href="">Home</a></li>
							<li ><a href="/archives.html">Archives</a></li>
						</ul>
					</div>
					<ul>
						<li>
							<h2>Catégories</h2>
							<ul>
								 <li ><a href="/blog">Blog</a></li>
							</ul>
						</li>
						<li>
						        <h2>Tags</h2>
						        <ul>
                                                                <li><a href="/devdiary">/dev/diary</a></li>
                                                                <li><a href="/rust">rust</a></li>
                                                                <li><a href="/ccc">CCC</a></li>
                                                                <li><a href="/reflections">reflections</a></li>
                                                                <li><a href="/programming">programming</a></li>
                                                                <li><a href="/meta">meta</a></li>
                                                                <li><a href="/moonscript">moonscript</a></li>
                                                                <li><a href="/libgdx">libgdx</a></li>
                                                                <li><a href="/game-dev">game dev</a></li>
                                                                <li><a href="/java">java</a></li>
                                                                <li><a href="/c3">c3</a></li>
                                                                <li><a href="/gsoc2016">gsoc2016</a></li>
                                                                <li><a href="/hardware">hardware</a></li>
                                                                <li><a href="/data-recovery">data recovery</a></li>
                                                                <li><a href="/linux">linux</a></li>
						        </ul>
						</li>
						
						
					</ul>
				</div>
				<!-- end #sidebar -->
				<div style="clear: both;">&nbsp;</div>
			</div>
		</div>
	</div>
	<!-- end #page -->

<div id="footer">
	<p>Copyright (c) 2008 Sitename.com. All rights reserved. Design by <a href="http://www.freecsstemplates.org/">CSS Templates</a>.</p>
	<p>Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.
</p>
</div>
<!-- end #footer -->
</body>
</html>