<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by Free CSS Templates
http://www.freecsstemplates.org
Released for free under a Creative Commons Attribution 2.5 License

Name       : Brown Stone  
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20100928

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Making my server completely replacable</title>
<link href="/theme/css/style.css" rel="stylesheet" type="text/css" media="screen" />
<link href="/" type="application/atom+xml" rel="alternate" title="barrel.rs ATOM Feed" />
<link href="/rss.xml" type="application/rss+xml" rel="alternate" title="barrel.rs RSS Feed" />
</head>
<body>
<div id="wrapper">
	<div id="page">
		<div id="page-bgtop">
			<div id="page-bgbtm">
    
                        	<div id="content">
					<div class="post">
						<h2 class="title"><a href="drafts/making-my-server-completely-replacable.html">Making my server completely replacable</a></h2>
						<p class="meta"><span class="date">Le 2018-02-08 </span><span class="posted">Par <a href="#">Sql People</a></span><span>&nbsp; | Cat√©gorie : <a href="/blog">Blog</a></span></p>
					<p class="meta">Tags : <span><a href="/devdiary">/dev/diary</a> / </span>
<span><a href="/linux">linux</a> / </span>
<span><a href="/ancible">ancible</a> / </span>
</p>	
						<div style="clear: both;">&nbsp;</div>
						<div class="entry">
						 <p><strong>This is mostly a draft so far, so maybe pad it a bit more üòâ</strong></p>
<p>I have a virtual server running Arch Linux hosted somewhere in Germany which I want to use to host some personal services and toolchains. Currently this is done via LXD which I was a fan of for quite a while. I am using Zfs as a backend for these containers which means that I can do quick snapshots and deduplication between the base systems. But...I'm not really sure this is a nice way to do it anymore. I would like to run services in Containers just because it means that the host can be setup in a more clean way.</p>
<p>But right now there is a lot of manual configuration required because I'm struggling with the new way that LXD handles network taps. And while I'm gonna have to touch my configs anyways, I thought: why not go a bit further?</p>
<h1>Existing setup</h1>
<div class="highlight"><pre><span></span> ‚òÅ (icarus) ~&gt; lxc list
+-------------+---------+----------------------+------+------------+-----------+
|    NAME     |  STATE  |         IPV4         | IPV6 |    TYPE    | SNAPSHOTS |
+-------------+---------+----------------------+------+------------+-----------+
| betakookie  | STOPPED |                      |      | PERSISTENT | 2         |
+-------------+---------+----------------------+------+------------+-----------+
| dcmerge     | RUNNING | 10.130.123.13 (eth0) |      | PERSISTENT | 0         |
+-------------+---------+----------------------+------+------------+-----------+
| dns         | STOPPED |                      |      | PERSISTENT | 1         |
+-------------+---------+----------------------+------+------------+-----------+
| gitlab      | RUNNING | 10.130.123.20 (eth0) |      | PERSISTENT | 2         |
+-------------+---------+----------------------+------+------------+-----------+
| hazelnot    | RUNNING | 10.130.123.12 (eth0) |      | PERSISTENT | 0         |
+-------------+---------+----------------------+------+------------+-----------+
| partkeepr   | STOPPED |                      |      | PERSISTENT | 3         |
+-------------+---------+----------------------+------+------------+-----------+
| spacekookie | RUNNING | 10.130.123.10 (eth0) |      | PERSISTENT | 2         |
+-------------+---------+----------------------+------+------------+-----------+
| stats       | RUNNING | 10.130.123.22 (eth0) |      | PERSISTENT | 0         |
+-------------+---------+----------------------+------+------------+-----------+
| turtl       | STOPPED |                      |      | PERSISTENT | 0         |
+-------------+---------+----------------------+------+------------+-----------+
| vpn-core    | STOPPED |                      |      | PERSISTENT | 0         |
+-------------+---------+----------------------+------+------------+-----------+
| wiki        | RUNNING | 10.130.123.23 (eth0) |      | PERSISTENT | 0         |
+-------------+---------+----------------------+------+------------+-----------+
</pre></div>


<p>Ultimately I want to run a few core services:</p>
<ul>
<li>My website (Also available in early access on Github üò±)</li>
<li>A friend's static website</li>
<li>Gitlab</li>
<li>Bookstack (my wiki)</li>
<li>Matomo (previously Piwik)</li>
<li>Partkeepr (a tool for managing electronic components)</li>
<li>Turtl (a cool evernote clone)</li>
<li>My own Quassel core (instead of using my ex-girlfriend's one üòâ)</li>
</ul>
<p>And maybe some more that I haven't setup yet. Including a VPN between my server, my NAS and all of my other devices.</p>
<h1>Future setup idea</h1>
<p>I have two servers running pretty much all the time:</p>
<ul>
<li>My cloud server</li>
<li>My NAS at home</li>
</ul>
<p>What I want to get over is having to manually configure containers and </p>	
						</div>
					</div>
			      
					<div style="clear: both;">&nbsp;</div>
				</div>
				<!-- end #content -->
				<div id="sidebar">
					<div id="logo">
						<h1><a href="">barrel.rs</a></h1>
					</div>
					<div id="menu">
						<ul>
							<li ><a href="">Home</a></li>
							<li ><a href="/archives.html">Archives</a></li>
						</ul>
					</div>
					<ul>
						<li>
							<h2>Cat√©gories</h2>
							<ul>
								 <li class="active"><a href="/blog">Blog</a></li>
							</ul>
						</li>
						<li>
						        <h2>Tags</h2>
						        <ul>
                                                                <li><a href="/devdiary">/dev/diary</a></li>
                                                                <li><a href="/rust">rust</a></li>
                                                                <li><a href="/ccc">CCC</a></li>
                                                                <li><a href="/reflections">reflections</a></li>
                                                                <li><a href="/programming">programming</a></li>
                                                                <li><a href="/meta">meta</a></li>
                                                                <li><a href="/moonscript">moonscript</a></li>
                                                                <li><a href="/libgdx">libgdx</a></li>
                                                                <li><a href="/game-dev">game dev</a></li>
                                                                <li><a href="/java">java</a></li>
                                                                <li><a href="/c3">c3</a></li>
                                                                <li><a href="/gsoc2016">gsoc2016</a></li>
                                                                <li><a href="/hardware">hardware</a></li>
                                                                <li><a href="/data-recovery">data recovery</a></li>
                                                                <li><a href="/linux">linux</a></li>
						        </ul>
						</li>
						
						
					</ul>
				</div>
				<!-- end #sidebar -->
				<div style="clear: both;">&nbsp;</div>
			</div>
		</div>
	</div>
	<!-- end #page -->

<div id="footer">
	<p>Copyright (c) 2008 Sitename.com. All rights reserved. Design by <a href="http://www.freecsstemplates.org/">CSS Templates</a>.</p>
	<p>Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.
</p>
</div>
<!-- end #footer -->
</body>
</html>