<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>barrel.rs</title>
    <link rel="shortcut icon" type="image/png" href="https://rust-db.github.io/barrel/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://rust-db.github.io/barrel/favicon.ico">
    <link href="https://rust-db.github.io/barrel/rss.xml" type="application/rss+xml" rel="alternate" title="barrel.rs RSS Feed" />
    <link rel="stylesheet" href="https://rust-db.github.io/barrel/theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="https://rust-db.github.io/barrel/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://rust-db.github.io/barrel/theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="Squirrel People" />
</head>
<body>
    <header>
        <nav>
            <ul>
            <!--  -->
                <li class="selected"><a href="https://rust-db.github.io/barrel/">Home</a></li>
                <li><a href="https://rust-db.github.io/barrel/blog/">Blog</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="https://rust-db.github.io/barrel/">barrel.rs</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">
            <div class="page">
                <p><img alt="" src="images/logo.svg"></p>
<p>A powerful schema migration builder, that let's you write your SQL migrations in Rust.</p>
<p><code>barrel</code> makes writing migrations for different databases as easy as possible.
It provides you with a common API over SQL,
with certain features only provided for database specific implementations.
This way you can focus on your Rust code, and stop worrying about SQL.</p>
<h2>Example</h2>
<p>The following example will help you get started</p>
<div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">barrel</span>::<span class="p">{</span><span class="n">types</span><span class="p">,</span><span class="w"> </span><span class="n">Migration</span><span class="p">,</span><span class="w"> </span><span class="n">Pg</span><span class="p">};</span><span class="w"></span>
<span class="k">use</span><span class="w"> </span><span class="n">barrel</span>::<span class="n">backend</span>::<span class="n">Pg</span><span class="p">;</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Migration</span>::<span class="n">new</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">create_table</span><span class="p">(</span><span class="s">&quot;users&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">|</span><span class="n">t</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">t</span><span class="p">.</span><span class="n">add_column</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">types</span>::<span class="n">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">));</span><span class="w"></span>
<span class="w">        </span><span class="n">t</span><span class="p">.</span><span class="n">add_column</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">types</span>::<span class="n">integer</span><span class="p">());</span><span class="w"></span>
<span class="w">        </span><span class="n">t</span><span class="p">.</span><span class="n">add_column</span><span class="p">(</span><span class="s">&quot;owns_plushy_sharks&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">types</span>::<span class="n">boolean</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="p">});</span><span class="w"></span>

<span class="w">    </span><span class="n">println</span><span class="o">!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">make</span>::<span class="o">&lt;</span><span class="n">Pg</span><span class="o">&gt;</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>


<h2>Using Diesel</h2>
<p>Since <code>diesel 1.2.0</code> it's possible to now use <code>barrel</code> for migrations with <code>diesel</code>. A guide with some more information on how to get started can be found <a href="https://github.com/spacekookie/barrel/blob/master/guides/diesel-setup.md">here</a></p>
<h3>Migration guide</h3>
<p>If you've been using <code>barrel</code> to write migrations for <code>diesel</code> before the <code>0.5.0</code> release,
some migration of your migrations will be required.
Since <code>0.5.0</code> the way types are constructed changed.
Instead of constructing a type with <code>Types::VarChar(255)</code> (an enum variant),
the types are now provided by a module called <code>types</code> and builder functions.
The same type would now be <code>types::varchar(255)</code> (a function call),
which then returns a <code>Type</code> enum.</p>
<p>You can also directly created your own <code>Type</code> builders this way.
Check the docs for details!</p>
<h2>Unstable features</h2>
<p>Starting with <code>v0.2.4</code> <code>barrel</code> now has an <code>unstable</code> feature flag which will hide features and breaking changes that are in-development at the time of a minor or patch release. You can use these features if you so desire, but be aware that their usage will change more rapidely between versions (even patches) and their usage will be badly documented.</p>
<h2>License</h2>
<p><code>barrel</code> is free software: you can redistribute it and/or modify it
under the terms of the MIT Public License.</p>
<p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
See the MIT Public License for more details.</p>
<h2>Conduct</h2>
<p>In the interest of fostering an open and welcoming environment,
the <code>barrel</code> project pledges to making participation a harassment-free experience for everyone.
See <a href="code_of_conduct.md">Code of Conduct</a> for details.
In case of violations, e-mail <a href="mailto:kookie@spacekookie.de">kookie@spacekookie.de</a>.</p>
            </div>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>